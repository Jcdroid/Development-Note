# 开发总结

> 将下面的每一条变成很平常的习惯，就想学习滑冰一样，每一个动作都得去练，只有每一个动作都记住了，才能学会，学会了之后，这些一条条的规则就不需要记了，因为已经成了你的习惯。

### iOS、Android开发
* **万变不离数据**：定义一个类时，首先定义好这个类需要的一些数据，把他们用自定义的model或者基本数据类型（如数组，字典，string等）表示出来。每一个界面都是数据和控件的结合，只要定义好对应的数据结构，布局好对应的控件，即可完美的实现需要的逻辑。比如在iOS可上拉刷新和下拉加载的列表中实现**全选**和**取消全选**，就需要定义一个记录`选中`状态的字典（不能使用数组，因为选中状态需要个一个唯一的key相结合），这个字典的结构如下，具体可查看`Remay-iOS`项目中的`RMGoodsManagementViewController.m`

```
@{ 
	@(选中数据的id): [NSNumber numberWithBool:<#(BOOL)#>],
	@(选中数据的id): [NSNumber numberWithBool:<#(BOOL)#>],
	...
}
```

* 在开发过程中要时刻想着不要重复写，尽量使得这次写的代码，在下一次遇到类似问题时可以做到复用，另外还要考虑一个方法的可测试性。
* 考虑一部分界面的数据是固定的array或dictionary，可以使用plist存放数据，然后在使用时加载数据的方式
* 重构代码时考虑类中方法的兼容性，尽量避免引起过多的改动，比如可以通过重载一个新的方法来达到兼容的目的、使用适配器等来解决。
* 考虑一串代码放在哪里可以减少重复的工作，必要的时候可以把这串代码封装成一个类
* 一个功能在实现之前，先思考是否有必要封装成一个单独的类，再小的功能也如此，这样可以提高代码的复用性
* 在写一个类时，记得尽量满足设计模式的六大原则，让这个类变得容易使用，容易复用。比如一个安装apk的方法，就可以考虑封装一个ApkInstaller的类，提供一个构造方法，传递下载地址过去，这样就达到了解耦（按照我以前的思维方式，我只会抽出到公用方法中）
* 一个类内部的改动，尽量不要引起外部的大面积修改，除非是必须，首先要考虑不引起外部的调用发生变化的实现方案
* 一个类初始化时需要传入一些参数时，考虑使用model或dictionary来包装这些参数，而不用一个个参数作为方法的命名（model方式更友好）
* 对一个工程中会多次出现的操作或者可以在以后的项目中复用的操作，考虑封装一下，可以使用单例模式<常用>或者其他模式。
* 每一个View的界面，可以把其拆分成一块一块的更小单位的view，让其颗粒更小，更容易复用，如uitableview的cell拆分，然后在cell中继续拆分出更小的view来封装起来，还可以把cell的view单独抽离出来cellview，这样每一个具体的使用者，就可以引用这个cellview来实现相同的cell和ccell或view。
* 当一个界面的数据计算很复杂、会出现很多种不同的情况时，考虑定义一个枚举来区分不同的情况，并且定义一个数据，根据数据的不同，把对应的枚举装载到数组中。
* 遇到或使用一个新的类时，先去了解这个类内部所装载的数据（也就是有哪些属性）和内部所实现的功能（也就是有哪些方法），然后了解这个类的继承和衍生关系。这样才能使用好这个类及与其相关联的子类和父类，才能达到最优化的使用这个类，避免走弯路。比不一定要全部了解，这个就太耗费时间了，但是大致的结构还是要知道的。在使用这个新类的属性时，必须要先读一读注释，可能里面有作者的重要提醒。
* 需要开发一个自定义控件时，先分析这个控件的实现逻辑，然后做出一些简单的特性，以后再根据需求逐步修改和添加对应的功能，不要一步想得太多，这样就很难做出基本的特性，当然也不要想得太多，心中得有一个度。

### 其他
* 如果经常看到一个新名词，经常出现在你的视野里，马上去查一查它，可能你正在错过了一个好东西。 
* 每次遇到一个重复的事情，注意用脚本自动化，如果这个重复的事情是一些基本的数据，那么就可以保存一些通用的数据（如APP在刚开始开发的icon和启动图片）